<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Display Techniques for ONIX Accessibility Metadata 2.0</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer="defer"></script>
		<script class="remove">
			// <![CDATA[
			var respecConfig = {
				group: "publishingcg",
				specStatus: "CG-DRAFT",
				noRecTrack: true,
				latestVersion: "https://www.w3.org/publishing/a11y/UX-Guide-metadata/techniques/onix-metadata/",
				edDraftURI: "https://w3c.github.io/publ-a11y/UX-Guide-Metadata/draft/techniques/onix-metadata/",
				canonicalURI: "https://www.w3.org/publishing/a11y/UX-Guide-metadata/techniques/onix-metadata/",
				editors: [
					{
						"name": "Gregorio Pellegrino",
						"company": "Fondazione LIA",
						"companyURL": "https://fondazionelia.org",
						"w3cid": 97111
					}
				],
				processVersion: 2020,
				includePermalinks: false,
				permalinkEdge:     true,
				permalinkHide:     false,
				diffTool:          "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
				github:			 {
					repoURL: "https://github.com/w3c/publ-a11y/",
					branch: "main"
				}
			};
			// ]]>
	  </script>
	  <style>
	  	var {
			color: brown;
		}
	  	ol.condition > li {
	  		margin-top: 1rem;
	  		margin-left: 0;
	  		padding-left: 0;
	  	}
	  	ol.condition > li > span {
	  		display: block;
	  	}
	  	ol.condition > li > span:nth-child(2) {
	  		margin-left: 2rem;
	  	}
	  	code.xpath {
	  		word-break: keep-all;
	  	}
	  </style>
	</head>
	<body>
		<section id="abstract"></section>
		<section id="sotd"></section>
		<section id="onix-metadata">
			<h2>ONIX Metadata</h2>
			
			<p class="note">
				Other techniques for implementing EPUB accessibility metadata are available: <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#techniques">Display Techniques for Displaying Accessibility Metadata</a>
			</p>
            
 			<p class="note">
 				This document provides techniques for meeting the guidelines of the <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/">User Experience Guide for Displaying Accessibility Metadata</a>. It provides practical examples for extracting information from the ONIX metadata for showing it to the end users.
			</p>
			
			<p class="note">
				ONIX messages describe products for the global book supply chain and will be sent from publisher or creator of the epub or digital books with full audio to those who will make the products available for sale, lending or subscription.
				These platforms may not yet have the actual files, as they may not yet be ready, or may only choose to list them for sale if they have certain accessibility features.
				ONIX also only describes a product, it cannot describe the features of the reading systems on which a product may be accessed.
				It is important to use ONIX metadata as a complement to the accessibility data embedded within the publication itself, if describing accessible books, books with full audio and related products for the global book supply chain.
				An ONIX file can be used to display accessibility information in advance of publication or when you do not have access to the metadata in the digital file itself.
				Some accessibility information may only be available when you have access to the file itself.
				If you are unfamiliar with ONIX, then there is more documentation available from <a href="https://www.editeur.org/83/Overview/">EDItEUR.org</a>.
			</p>
			
			<p class="note">
				It is important to note that ONIX 3.0 includes a number of new accessibility metadata codes, some of which may not be expressible in earlier versions of ONIX.
			</p>
				
			<section id="onix-record-examples">
				<h3>ONIX record examples</h3>
				<section id="onix-record-describing-an-epub">
					<h4>ONIX record describing an EPUB</h4>
					<p>Here is an example of an ONIX record (version 3.0), which will be used as a reference point for the
						following examples on EPUB accessibility metadata: the results of the XPath shown are based on
						this example.</p>
					<aside class="example" id="onix-example-1">
						<pre><code class="xpath">TBD</code></pre>
					</aside>
				</section>
				<section>
					<h4
						id="onix-record-describing-an-full-audio-book-here-is-an-example-of-an-onix-record-version-3.0-for-describing-a-full-audio-book"
						>ONIX record describing an audiobook</h4>
						<p>Here is an example of an ONIX record (version 3.0) for describing an audiobook, which will be used as a reference point for the
						some of the following examples on EPUB accessibility metadata: the results of the XPath shown are based on
						this example.</p>
					<aside class="example" id="onix-example-2">
						<pre><code class="xpath">TBD</code></pre>
					</aside>
				</section>
			</section>
		</section>
		<section id="conventions">
			<h2>Conventions for implementations</h2>
			<p>The code conventions used in the provided code snippet follow a structure commonly found in programming languages like Python, Java, or C++. Here&#39;s an explanation of the conventions:</p>
			<dl>
				<dt>Conditionals and Control Flow:</dt>
					<dd><b>IF</b>, <b>ELSE IF</b>, and <b>ELSE</b> (in bold and capital letters) statements are used to define different conditions and the corresponding actions to be taken.</dd>
				<dt>Operators:</dt>
					<dd>Written operators (<i>is present</i>) are used to check if a particular code or codelist is present (or not) in the metadata record.</dd>
				<dt>Logical operators:</dt>
					<dd>Logical operators (<b>AND</b>, <b>OR</b>, <b>NOT</b>, in bold and capital letters) are used to combine conditions.</dd>
				<dt>String Literals:</dt>
					<dd>String literals are used to represent the text that should be displayed when a particular condition is met.</dd>
				<dt>Variable Naming:</dt>
					<dd>The terms like &quot;codelist&quot; and &quot;code&quot; are used in a way that suggests a variable or data structure representing a code or codelist to be accessed directly after the ingestion of the metadata record.</dd>
				<dt>Indentation:</dt>
					<dd>The code uses consistent indentation to define blocks of code within conditional statements. This is crucial for readability and maintaining a clear structure.</dd>
				<dt>Readability:</dt>
					<dd>The code is written in a way that is intended to be easily readable and understandable even by non-coders.</dd>
			</dl>
		</section>
		<section id="common-functions">
			<h2>Common Functions</h2>
			<p>In this section we define the functions common to all techniques, which are called by them during execution.</p>
			<section id="pre-processing">
				<h3>Pre Processing</h3>
				<p>Before working directly with the metadata we must read the ONIX record. This is a common starting point for all techniques that allows us to query the record directly.</p>
				<aside class="note">
					<p>This algorithm does not describe how the ONIX record is discovered and obtained.</p>
				</aside>
				<p>This algorithm takes the <var>onix_record_as_text</var> argument: a UTF-8 string representing the ONIX record.</p>
				<p>To generate the internal representation, run the following steps:</p>
				<ol class="condition">
					<li><b>LET</b> <var>record</var> be textual representation of the ONIX record for the publication given <var>onix_record_as_text</var>.</li>
					<li><b>LET</b> <var>onix</var> be the DOM tree that results from parsing <var>record</var> using an XML DOM parser.</li>
					<li>Return <var>onix</var>.</li>
				</ol>
				<aside class="note">
					<p>The XML file being processed may contain namespaces, in the techniques when we use XPATH we will assume that the default namespace of the root record is used.</p>
				</aside>
			</section>
			<section id="check-for-node">
				<h3>Check for Node</h3>
				<p>Many of the techniques rely on checking for the presence or absence of metadata in the ONIX record.</p>
				<p>This algorithm takes:</p>
				<ul>
					<li>the <var>onix</var> argument: the internal representation of ONIX record (output of <a href="#pre-processing">pre processing</a>);</li>
					<li>the <var>path</var> argument: the XPATH of the node to check the presence of.</li>
				</ul>
				<p>To check for node, run the following steps:</p>
				<ol class="condition">
					<li>
						<span><b>IF</b> <var>onix</var> contains <var>path</var>:</span>
						<span><b>THEN</b> return <code>True</code>.</span>
					</li>
					<li><b>ELSE</b> return <code>False</code>.</li>
				</ol>
			</section>
		</section>
		<section id="techniques">
			<h2>Techniques</h2>
			
			<section id="supports-nonvisual-reading">
				<h3>Supports nonvisual reading</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#supports-nonvisual-reading">Supports nonvisual reading key information</a>.</p>
				<p>This algorithm takes the <var>onix_record_as_text</var> argument: a UTF-8 string representing the ONIX record.</p>
				<h4>Understanding the variables</h4>
				<dl>
					<dt><var>all_necessary_content_textual</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/196/52">code 52 of codelist 196</a> (All non-decorative content supports reading without sight) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>All non-decorative content supports reading without sight, means that all contents of the digital publication necessary to use and understanding, including text, images (via their alternative descriptions), audio and video material (via their transcripts, descriptions, captions or subtitles) are fully accessible via suitable reading devices, for example text-to-speech screen readers or tactile reading devices (‘Braille displays’), and nothing in the digital publication prevents or blocks the use of alternative reading modes. The entire publication can be navigated and ‘read’ using only text rendered via sound or touch, and does not require visual perception.</p>
					</dd>

<!--					<dt><var>real_text</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/81/10">code 10 of codelist 81</a> (Text) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>Text</i> means that digital publication contains "real" text (user-selectable) as its main content (or as secondary content).</p>
					</dd>-->

					<dt><var>non_textual_content</var></dt>
					<dd>
						<p>If true it indicates that at least one of the following is present in the ONIX record: 
							<ul>
								<li><a href="https://ns.editeur.org/onix/en/81/07">code 07 of codelist 81</a> (Still images / graphics);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/18">code 18 of codelist 81</a> (Photographs);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/19">code 19 of codelist 81</a> (Figures, diagrams, charts, graphs);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/12">code 12 of codelist 81</a> (	Maps and/or other cartographic content);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/49">code 49 of codelist 81</a> (Images of text);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/06">code 06 of codelist 81</a> (Video);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/26">code 26 of codelist 81</a> (	Video recording of a reading);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/50">code 50 of codelist 81</a> (	Video content without audio);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/27">code 27 of codelist 81</a> (Performance – visual);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/24">code 24 of codelist 81</a> (Animated / interactive illustrations);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/29">code 25 of codelist 81</a> (Partial performance – video);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/24">code 24 of codelist 81</a> (Animated / interactive illustrations);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/30">code 30 of codelist 81</a> (Additional video content not part of main work);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/20">code 20 of codelist 81</a> (	Additional images / graphics not part of main work);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/21">code 21 of codelist 81</a> (Partial performance – spoken word);</li>
								<li><a href="https://ns.editeur.org/onix/en/81/22">code 22 of codelist 81</a> (	Additional audio content not part of main content);</li>
							</ul>
							otherwise if false it means that the metadata is not present.</p>
						<p><i>Text within images</i> means that digital publication contains text within images (i.e. text in diagrams, charts or balloons on which the user will not be able to change the display settings) as its main content (or as secondary content).</p>
					</dd>
<!--					<dt><var>images_of_text</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/81/49">code 49 of codelist 81</a> () is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>Images of text</i> means that digital publication contains images of text (i.e. pictures of text on which the user will not be able to change the display settings) as its main content (or as secondary content).</p>
					</dd>-->
					<dt><var>textual_alternative</var></dt>
					<dd>
						<p>If true it indicates that at least one of the following is present in the ONIX record: 
							<ul>
								<li><a href="https://ns.editeur.org/onix/en/196/14">code 14 of codelist 196</a> (Short alternative textual descriptions);</li>
								<li><a href="https://ns.editeur.org/onix/en/196/15">code 15 of codelist 196</a> (Full alternative textual descriptions);</li>
								<li><a href="https://ns.editeur.org/onix/en/196/16">code 16 of codelist 196</a> (Visualised data also available as non-graphical data);</li>
								<li><a href="https://ns.editeur.org/onix/en/196/16">code 16 of codelist 196</a> (Visualised data also available as non-graphical data);</li>
							</ul>
						otherwise if false it means that the metadata is not present.</p>
					</dd>
				</dl>
				<h4>Variables setup</h4>
				<ol class="condition">
					<li><b>LET</b> <var>onix</var> be the result of calling <a href="#pre-processing">pre processing</a> given <var>onix_record_as_text</var>.</li>
					<li><b>LET</b> <var>all_necessary_content_textual</var> 
						be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductFormFeature[ProductFormFeatureType = "09" and ProductFormFeatureValue = "52"]</code>.</li>

<!--					<li><b>LET</b> <var>real_text</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "10"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "10"]</code>.</li>
					<li><b>LET</b> <var>text_within_images</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "45"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "45"]</code>.</li>
					<li><b>LET</b> <var>images_of_text</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "49"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "49"]</code>.</li>-->
					...
				</ol>
				<h4>Instructions</h4>
				<ol class="condition">
					<li>
						<span><b>IF</b> <var>all_necessary_content_textual</var>:</span>
						<span><b>THEN</b> display "<code id="nonvisual-reading-1">Readable in read aloud and braille.</code>".</span>
					</li>
					<li>
						<span><b>ELSE IF</b> <var>non_textual_content</var> <b>AND</b> <b>NOT</b> <var>textual_alternative</var>:</span>
						<span><b>THEN</b> display "<code id="nonvisual-reading-2">Not fully readable in read aloud and braille</code>".</span>
					</li>
					<li><b>ELSE</b> display "<code id="visual-adjustments-4">May not be fully readable in read aloud and braille</code>".</li>
				</ol>
			
			</section>
			
			<section id="pre-recorded-audio">
				<h3>Pre-recorded audio</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#pre-recorded-audio">Pre-recorded audio key information</a>.</p>

			</section>
			
			<section id="visual-adjustments">
				<!-- https://www.w3.org/TR/pub-manifest/#manifest-processing -->
				<h3>Visual adjustments</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#visual-adjustments">Visual adjustments key information</a>.</p>
				<p>This algorithm takes the <var>onix_record_as_text</var> argument: a UTF-8 string representing the ONIX record.</p>
				<h4>Understanding the variables</h4>
				<dl>
					<dt><var>all_textual_content_can_be_modified</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/196/36">code 36 of codelist 196</a> (All textual content can be modified) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>All textual content can be modified</i> means that the digital publication does not restrict the ability of users to modify and reflow the display of any textual content to the full extent allowed by the reading system (i.e. to change the text size or typeface, line height and word spacing, colors).</p>
					</dd>
					<dt><var>real_text</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/81/10">code 10 of codelist 81</a> (Text) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>Text</i> means that digital publication contains "real" text (user-selectable) as its main content (or as secondary content).</p>
					</dd>
					<dt><var>text_within_images</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/81/45">code 45 of codelist 81</a> (Text within images) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>Text within images</i> means that digital publication contains text within images (i.e. text in diagrams, charts or balloons on which the user will not be able to change the display settings) as its main content (or as secondary content).</p>
					</dd>
					<dt><var>images_of_text</var></dt>
					<dd>
						<p>If true it indicates that the <a href="https://ns.editeur.org/onix/en/81/49">code 49 of codelist 81</a> (Images of text) is present in the ONIX record, otherwise if false it means that the metadata is not present.</p>
						<p><i>Images of text</i> means that digital publication contains images of text (i.e. pictures of text on which the user will not be able to change the display settings) as its main content (or as secondary content).</p>
					</dd>
				</dl>
				<h4>Variables setup</h4>
				<ol class="condition">
					<li><b>LET</b> <var>onix</var> be the result of calling <a href="#pre-processing">pre processing</a> given <var>onix_record_as_text</var>.</li>
					<li><b>LET</b> <var>all_textual_content_can_be_modified</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductFormFeature[ProductFormFeatureType = "09" and ProductFormFeatureValue = "36"]</code>.</li>
					<li><b>LET</b> <var>real_text</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "10"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "10"]</code>.</li>
					<li><b>LET</b> <var>text_within_images</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "45"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "45"]</code>.</li>
					<li><b>LET</b> <var>images_of_text</var> be the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/PrimaryContentType[text() = "49"]</code> <b>OR</b> the result of calling <a href="#check-for-node">check for node</a> on <var>onix</var>, <code class="xpath">/ONIXMessage/Product/DescriptiveDetail/ProductContentType[text() = "49"]</code>.</li>
				</ol>
				<h4>Instructions</h4>
				<ol class="condition">
					<li>
						<span><b>IF</b> <var>all_textual_content_can_be_modified</var>:</span>
						<span><b>THEN</b> display "<code id="visual-adjustments-1">Appearance can be modified</code>".</span>
					</li>
					<li>
						<span><b>ELSE IF</b> <var>real_text</var> <b>AND</b> <b>NOT</b> <var>all_textual_content_can_be_modified</var>:</span>
						<span><b>THEN</b> display "<code id="visual-adjustments-2">Appearance cannot be modified</code>".</span>
					</li>
					<li>
						<span><b>ELSE IF</b> <var>text_within_images</var> <b>OR</b> <var>images_of_text</var>:</span>
						<span><b>THEN</b> display "<code id="visual-adjustments-3">Appearance cannot be modified for all textual content</code>".</span>
					</li>
					<li><b>ELSE</b> display "<code id="visual-adjustments-4">Appearance modifiability not known</code>".</li>
				</ol>
			</section>
			
			<section id="navigation">
				<h3>Navigation</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#navigation">Navigation key information</a>.</p>

			</section>
			
			<section id="charts-diagrams-and-formulas">
				<h3>Charts, diagrams, and formulas</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#charts-diagrams-and-formulas">Charts, diagrams, and formulas key information</a>.</p>

			</section>
			
			<section id="hazards">
				<h3>Hazards</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#hazards">Hazards key information</a>.</p>

			</section>
			
			<section id="conformance-group">
				<h3>Conformance</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#conformance-group">Conformance key information</a>.</p>

			</section>
			
			<section id="accessibility-summary">
				<h3>Accessibility summary</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#accessibility-summary">Accessibility summary key information</a>.</p>

			</section>
			
			<section id="additional-accessibility-information">
				<h3>Additional accessibility information</h3>
				<p>This technique relates to <a href="https://www.w3.org/2021/09/UX-Guide-metadata-2.0/principles/#additional-accessibility-information">Additional accessibility information key information</a>.</p>

			</section>
			
		</section>
		<section id="app-acknowledgements" class="appendix informative">
			<h2 id="acknowledgements">Acknowledgements</h2>
			<section id="contributors">
				<h3>Contributors</h3>
				<ul>
					<li>Avneesh Singh</li>
                    <li>Charles LaPierre</li>
					<li>Dave Cramer</li>
                    <li>George Kerscher</li>
                    <li>Gregorio Pellegrino</li>
					<li>Jason White</li>
					<li>Madeleine Rothberg</li>
                    <li>Matt Garrish</li>
					<li>Rachel Comerford</li>
					<li>Rick Johnson</li>
				</ul>
			</section>
			<section id="reviewers">
				<h3>Reviewers</h3>
				<ul>
					<li>Erin Kirchner-Lucas</li>
					<li>Luc Audrain</li>
				</ul>
			</section>
		</section>
	</body>
</html>